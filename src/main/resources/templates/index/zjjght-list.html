<!DOCTYPE html>
<html class="iframe-h">
	<head>
		<meta charset="UTF-8">
        <meta http-equiv="Content-Type" content="application/json;charset=utf-8"/>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>资金监管合同列表</title>
        <link rel="stylesheet" href="../static/layui/css/layui.css"  media="all">
	</head>

	<body>
        <table class="layui-hide" id="test" lay-filter="test"></table>
        <script src="../static/layui/layui.js" charset="utf-8"></script>
        <script src="../static/index/js/jquery.min.js"></script>
	</body>
    <script>
        layui.use('table', function(){
            var $ = layui.$;
            var table = layui.table;
            table.render({
                elem: '#test'
                ,url:'/zjjght/getDataByHtbh'
                ,title: '资金监管合同'
                ,cols: [
                    [
                        {field:'', title:'序号', width:80,type:'numbers', fixed: 'left'}
                        ,{field:'htbh', title:'合同编号'}
                        ,{field:'cqr', title:'产权人'}
                        ,{field:'cqzl', title:'产权坐落'}
                    ]
                ]
                ,page: true
            });
            //监听行单击事件（双击事件为：rowDouble）
            table.on('row(test)', function(obj){
                var data = obj.data;

                //向后台发送请求
                $.ajax({
                   url:'../zjjght/findDataByHtbh?htbh='+data.htbh,
                   type:'get',
                   dataType:'json',
                   success: function (obj) {
                        //获取父页面元素，进行赋值
                        $(window.parent.document).find('#htbh').val(obj.htbh);
                        $(window.parent.document).find('#qzlx').val(obj.qzlx);
                        $(window.parent.document).find('#qzhm').val(obj.qzhm);
                        $(window.parent.document).find('#htrq').val(obj.htrq);

                        $(window.parent.document).find('#slzl').val(obj.slzl);
                        $(window.parent.document).find('#jzmj').val(obj.jzmj);
                        $(window.parent.document).find('#cjjg').val(obj.cjjg);
                        $(window.parent.document).find('#fkfs').val(obj.fkfs);
                        $(window.parent.document).find('#sfje').val(obj.sfje);
                        $(window.parent.document).find('#dkyh').val(obj.dkyh);
                        $(window.parent.document).find('#dkje').val(obj.dkje);

                        $(window.parent.document).find('#jfxm').val(obj.jfxm);
                        $(window.parent.document).find('#jfdh').val(obj.jfdh);
                        $(window.parent.document).find('#jfzjlx').val(obj.jfzjlx);
                        $(window.parent.document).find('#jfzjhm').val(obj.jfzjhm);
                        $(window.parent.document).find('#jfzz').val(obj.jfzz);
                        $(window.parent.document).find('#jfbwtr').val(obj.jfbwtr);
                        $(window.parent.document).find('#jfbwtrzjlx').val(obj.jfbwtrzjlx);
                        $(window.parent.document).find('#jfbwtrzjhm').val(obj.jfbwtrzjhm);

                        $(window.parent.document).find('#yfxm').val(obj.yfxm);
                        $(window.parent.document).find('#yfdh').val(obj.yfdh);
                        $(window.parent.document).find('#yfzjlx').val(obj.yfzjlx);
                        $(window.parent.document).find('#yfzjhm').val(obj.yfzjhm);
                        $(window.parent.document).find('#yfzz').val(obj.yfzz);
                        $(window.parent.document).find('#yfbwtr').val(obj.yfbwtr);
                        $(window.parent.document).find('#yfbwtrzjlx').val(obj.yfbwtrzjlx);
                        $(window.parent.document).find('#yfbwtrzjhm').val(obj.yfbwtrzjhm);

                        $(window.parent.document).find('#jgzje').val(obj.jgzje);

                        //关闭页面
                        var index = parent.layer.getFrameIndex(window.name);//获取窗口索引
                        parent.layer.close(index);

                   },
                   error: function () {
                       layer.alert("出错了，请重试");
                       location.reload();
                   }
                });
                //标注选中样式
                obj.tr.addClass('layui-table-click').siblings().removeClass('layui-table-click');

            });
        });
    </script>

</html>